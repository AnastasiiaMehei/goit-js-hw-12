{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { page, limit } from '../main';\nimport axios from 'axios';\nexport async function fetchImages(query) {\n  const url = 'https://pixabay.com/api/';\n  const params = new URLSearchParams({\n    key: '42924833-4b721b8caf67a58fd43475ecb',\n    per_page: limit,\n    page: page,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n  });\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from '../main';\n\nexport async function renderImages(data) {\n  console.log(data);\n  const images = data.hits;\n  // console.log(data.hits);\n  if (images.length == 0) {\n    iziToast.error({\n      title: 'Error',\n      message: `Error: No such pictures!`,\n      position: 'topRight',\n    });\n  }\n\n  refs.ulEl.insertAdjacentHTML('beforeend', createGalleryMarkup(images));\n  const galleryCfg = {\n    captionsData: 'alt',\n    captionDelay: 250,\n  };\n  let lightbox = new SimpleLightbox('.gallery a', galleryCfg);\n  lightbox.on('show.simplelightbox', function () {});\n  lightbox.refresh();\n}\n\nfunction createGalleryMarkup(images) {\n  return images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n      <li class=\"gallery-item\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img       \n          class=\"gallery-image\"\n          width=\"1280\"\n          height=\"152\"\n          src=\"${webformatURL}\"\n          alt=\"${tags}\"\n        />\n        <ul class=\"img-description\"><li class><h3>Likes</h3><p>${likes}</p><li/>\n        <li><h3>Views</h3><p>${views}</p><li/>\n        <li><h3>Comments</h3><p>${comments}</p><li/>  \n        <li><h3>Downloads</h3><p>${downloads}</p><li/></ul>\n      </a>\n    </li>   \n  `\n    )\n    .join('');\n}\n// container.insertAdjacentHTML('beforeend', createGalleryMarkup(images));\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { fetchImages } from '../src/js/pixabay-api';\nimport { renderImages } from './js/render-function';\nexport const refs = {\n  formEl: document.querySelector('form'),\n  inputEl: document.querySelector('input.form-control'),\n  ulEl: document.querySelector('ul.gallery'),\n};\n\nexport const loadButton = document.getElementById('load-button');\nexport const loaderDiv = document.getElementById('loader');\nexport let page = 1;\nexport let limit = 15;\n\nexport let query = '';\nrefs.inputEl.addEventListener('input', e => {\n  e.preventDefault();\n  query = refs.inputEl.value.trim();\n  refs.ulEl.innerHTML = '';\n  // loaderDiv.className = 'loader visually-hidden';\n  // loadButtonButton.className = 'loader visually-hidden';\n});\nconst searchBtn = document.querySelector('.btn');\nsearchBtn.addEventListener('click', async () => {\n  refs.ulEl.innerHTML = '';\n  loader.className = 'loader';\n  page = 1;\n  limit = 15;\n  try {\n    if (query) {\n      loadButton.className = '';\n      // refs.ulEl.innerHTML = <div class=\"loader\"></div>;\n      const posts = await fetchImages(query);\n      renderImages(posts);\n      loader.className = 'loader visually-hidden';\n      page += 1;\n    }\n  } catch (error) {\n    loadButton.className = 'visually-hidden';\n    iziToast.error({\n      title: 'Error',\n      backgroundColor: 'red',\n      position: 'topRight',\n      message:\n        'Please Sorry, there are no images matching your search query. Please try again! again!',\n    });\n  }\n});\nloadButton.addEventListener('click', async () => {\n  loader.className = 'loader';\n  try {\n    if (query) {\n      const posts = await fetchImages(query);\n      const totalItems = posts.totalHits;\n      renderImages(posts);\n      const currentPageItems =\n        document.querySelectorAll('.gallery-item').length;\n      if (currentPageItems >= totalItems) {\n        loadButton.className = 'visually-hidden';\n        loaderDiv.className = 'visually-hidden';\n        return iziToast.error({\n          title: 'Error',\n          message: `We're sorry, but you've reached the end of search results.`,\n          position: 'topRight',\n        });\n      }\n      renderImages(posts);\n      loaderDiv.className = 'loader visually-hidden';\n      const rect = loadButton.getBoundingClientRect();\n      scrollBy(rect.x, rect.y);\n      page += 1;\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      backgroundColor: 'red',\n      position: 'topRight',\n      message:\n        'Please Sorry, there are no images matching your search query. Please try again! again!',\n    });\n  }\n});\n"],"names":["fetchImages","query","url","params","limit","page","axios","renderImages","data","images","iziToast","refs","createGalleryMarkup","galleryCfg","lightbox","SimpleLightbox","webformatURL","largeImageURL","tags","likes","views","comments","downloads","loadButton","loaderDiv","searchBtn","posts","totalItems","rect"],"mappings":"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"}